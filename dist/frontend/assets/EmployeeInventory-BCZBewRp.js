import{j as e}from"./framer-motion-CP1hDTrg.js";import{r as t}from"./react-vendor-CFOUl9e9.js";import{f as a}from"./currency-CLTscsdx.js";import{g as r}from"./index-D8_-wRmV.js";import"./lucide-Jis9dCxC.js";function s(){const[s,l]=t.useState([]),[d,i]=t.useState(!0),[n,c]=t.useState(null),[o,x]=t.useState(""),[g,m]=t.useState("all"),[p,y]=t.useState("all"),[h,u]=t.useState([]);t.useEffect(()=>{b()},[]);const b=async()=>{try{c(null);const e=await fetch(r("/api/inventory?limit=50000&page=1"),{credentials:"include"});if(!e.ok){const t=await e.text();return c(`Failed to load inventory: ${e.status} - ${t}`),void l([])}const t=await e.json();if(t.products&&Array.isArray(t.products)){const e=t.products;l(e);const a=Array.from(new Set(e.map(e=>e.category).filter(e=>!!e)));u(a)}else l([]),t.debug}catch(e){c(e instanceof Error?e.message:"Failed to load inventory"),l([])}finally{i(!1)}},j=s.filter(e=>{const t=e.product_name.toLowerCase().includes(o.toLowerCase())||e.sku.toLowerCase().includes(o.toLowerCase()),a="all"===g||e.category===g,r="all"===p||"low"===p&&e.quantity_available<=e.reorder_level||"in"===p&&e.quantity_available>e.reorder_level;return t&&a&&r}),w=s.length,f=s.filter(e=>e.quantity_available<=e.reorder_level).length,k=s.filter(e=>0===e.quantity_available).length;return d?e.jsxs("div",{className:"p-4 sm:p-6 md:p-8 min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6",children:"Inventory"}),e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Loading inventory..."})]})})]}):e.jsxs("div",{className:"p-4 sm:p-6 md:p-8 min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6",children:"Inventory"}),n&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("strong",{className:"font-bold",children:"Error Loading Inventory:"}),e.jsx("span",{className:"block sm:inline ml-2",children:n})]}),e.jsx("button",{onClick:()=>{c(null),b()},className:"bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600",children:"Retry"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Total Products"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:w})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Low Stock"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:f})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Out of Stock"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:k})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsx("input",{type:"text",placeholder:"Search by product name or SKU...",className:"p-2 border border-gray-300 dark:border-gray-700 rounded-md w-full sm:w-auto bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:o,onChange:e=>x(e.target.value)}),e.jsxs("select",{className:"p-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:g,onChange:e=>m(e.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),h.map(t=>e.jsx("option",{value:t,children:t},t))]}),e.jsxs("select",{className:"p-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:p,onChange:e=>y(e.target.value),children:[e.jsx("option",{value:"all",children:"All Stock"}),e.jsx("option",{value:"in",children:"In Stock"}),e.jsx("option",{value:"low",children:"Low Stock"})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Product Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SKU"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Category"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Reorder Level"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:0===j.length?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No products found."})}):j.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:t.product_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.sku}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.category||"Uncategorized"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.quantity_available}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.reorder_level}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:a(t.unit_price)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(0===t.quantity_available?"bg-red-100 text-red-800":t.quantity_available<=t.reorder_level?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:0===t.quantity_available?"Out of Stock":t.quantity_available<=t.reorder_level?"Low Stock":"In Stock"})})]},t.product_id))})]})})]})}export{s as default};
