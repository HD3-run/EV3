import{j as e}from"./framer-motion-CP1hDTrg.js";import{r as a}from"./react-vendor-CFOUl9e9.js";import{b as t,a as r,g as s}from"./index-Zg8dsWBS.js";import"./lucide-Jis9dCxC.js";function d(){const[d,l]=a.useState([]),[i,n]=a.useState(!0),[c,o]=a.useState(""),[x,p]=a.useState(!1),[g,m]=a.useState({name:"",contactPerson:"",email:"",phone:"",address:""}),{user:y}=t();r();const h=(null==y?void 0:y.role)||"admin";a.useEffect(()=>{u()},[]);const u=async()=>{try{const e=await fetch(s("/api/suppliers"),{credentials:"include"});if(e.ok){const a=await e.json();l(a.suppliers||[])}}catch(e){}finally{n(!1)}},b=d.filter(e=>e.supplier_name.toLowerCase().includes(c.toLowerCase())||e.contact_person.toLowerCase().includes(c.toLowerCase())||e.email.toLowerCase().includes(c.toLowerCase()));return i?e.jsxs("div",{className:"p-6 bg-gray-100 dark:bg-gray-900 min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"Suppliers"}),e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Loading suppliers..."})})]}):e.jsxs("div",{className:"p-6 bg-gray-100 dark:bg-gray-900 min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"Suppliers"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0",children:[e.jsx("input",{type:"text",placeholder:"Search suppliers...",value:c,onChange:e=>o(e.target.value),className:"w-full sm:w-1/3 p-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),"admin"===h&&e.jsx("button",{onClick:()=>p(!0),className:"p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Add Supplier"})]}),e.jsx("div",{className:"bg-slate-800/50 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Supplier Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact Person"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Added"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:0===b.length?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No suppliers found. Add suppliers to manage your supply chain."})}):b.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:a.supplier_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:a.contact_person}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:a.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:a.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:a.address}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:new Date(a.created_at).toLocaleDateString()})]},a.supplier_id))})]})})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Supplier"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Supplier Name",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.name,onChange:e=>m({...g,name:e.target.value})}),e.jsx("input",{type:"text",placeholder:"Contact Person",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.contactPerson,onChange:e=>m({...g,contactPerson:e.target.value})}),e.jsx("input",{type:"email",placeholder:"Email",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.email,onChange:e=>m({...g,email:e.target.value})}),e.jsx("input",{type:"tel",placeholder:"Phone",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:g.phone,onChange:e=>m({...g,phone:e.target.value})}),e.jsx("textarea",{placeholder:"Address",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,value:g.address,onChange:e=>m({...g,address:e.target.value})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:async()=>{try{(await fetch(s("/api/suppliers"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(g)})).ok?(alert("Supplier added successfully!"),p(!1),m({name:"",contactPerson:"",email:"",phone:"",address:""}),u()):alert("Failed to add supplier")}catch(e){alert("Failed to add supplier")}},disabled:!g.name,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:"Add Supplier"})]})]})})]})}export{d as default};
